{% extends 'base.html' %}

{% block title %}Notificaciones (Veterinario) - MyDOG{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h1 class="font-titulo text-primary-mydog mb-0">Mis Notificaciones</h1>
  <form method="post" action="{% url 'notificaciones:api_marcar_todas' %}">
    {% csrf_token %}
    <button id="mark-all" type="submit" class="btn btn-outline-secondary">Marcar todas como leídas</button>
  </form>
 </div>
<div class="list-group shadow-sm">
  {% for n in notificaciones %}
  <div class="list-group-item">
    <div class="d-flex justify-content-between">
      <div>
        <strong>{{ n.get_tipo_display }}</strong> — {{ n.asunto }}<br>
        {% if n.cita %}<small>Cita #{{ n.cita.id }} · Mascota: {{ n.cita.mascota.nombre }}</small>{% endif %}
      </div>
      <div>{% if not n.leida %}<span class="badge bg-primary">No leída</span>{% endif %}</div>
    </div>
  </div>
  {% empty %}
  <div class="list-group-item text-muted">No hay notificaciones</div>
  {% endfor %}
</div>
<!-- Sin JS: el formulario realiza POST y la vista redirige al referer -->
{% endblock %}
